{{template "layouts/main"}}

<div class="container" x-data="{ playerName: '', battleMode: '1v1 battle' }">
    <div class="battle-modal">
        <div class="battle-form-card">
            <h2>Start Battle</h2>
            
            <form @submit.prevent="startBattle()" class="simple-battle-form">
                <div class="form-field">
                    <label for="playerName">Your Name:</label>
                    <input 
                        type="text" 
                        id="playerName"
                        x-model="playerName" 
                        class="simple-input"
                        required
                        maxlength="20"
                    >
                </div>

                <div class="form-field">
                    <label for="battleMode">Battle Mode:</label>
                    <select id="battleMode" x-model="battleMode" class="simple-select">
                        <option value="1v1 battle">1v1 battle</option>
                        <option value="5v5 battle">5v5 battle</option>
                    </select>
                </div>

                <button type="submit" class="start-battle-btn" :disabled="!playerName.trim()">
                    Start Battle
                </button>
            </form>
        </div>
    </div>
</div>

<script>
function startBattle() {
    const playerName = this.playerName.trim();
    const battleMode = this.battleMode;
    
    if (!playerName) {
        alert('Please enter your trainer name!');
        return;
    }
    
    // Extract mode (1v1 or 5v5) from the selection
    const mode = battleMode.includes('1v1') ? '1v1' : '5v5';
    
    // Redirect to the appropriate battle page
    window.location.href = `/battle?mode=${mode}&player=${encodeURIComponent(playerName)}`;
}
</script>
